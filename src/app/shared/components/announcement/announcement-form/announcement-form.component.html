<div class="announcements py-[60px] md:py-[18px]">
  <div class="2xl:container mx-auto px-4">
    <div class="title flex justify-between items-center">
      <h3 class="text-[60px] font-600 md:text-[20px]">E'lon qo'shish</h3>
      <button (click)="goBack()" class="px-[20px] cursor-pointer whitespace-nowrap py-[10px] rounded-[12px] text-black bg-[var(--gray-1)] text-[16px] font-500 flex items-center gap-[10px]">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M11.0303 8.53033C11.3232 8.23744 11.3232 7.76256 11.0303 7.46967C10.7374 7.17678 10.2626 7.17678 9.96967 7.46967L5.96967 11.4697C5.82322 11.6161 5.75 11.8081 5.75 12C5.75 12.1017 5.77024 12.1987 5.80691 12.2871C5.84351 12.3755 5.89776 12.4584 5.96967 12.5303L9.96967 16.5303C10.2626 16.8232 10.7374 16.8232 11.0303 16.5303C11.3232 16.2374 11.3232 15.7626 11.0303 15.4697L8.31066 12.75H18C18.4142 12.75 18.75 12.4142 18.75 12C18.75 11.5858 18.4142 11.25 18 11.25H8.31066L11.0303 8.53033Z" fill="black" />
        </svg>
        Ortga qaytish
      </button>
    </div>
    <div class="body mt-[30px]" [formGroup]="ruleForm">
      <div class="forma max-w-[992px] md:max-w-full mx-auto md:bg-transparent bg-[var(--gray-1)] px-8 py-8 md:px-0 md:py-0">
        <h4 class="text-black font-semibold mb-4 text-[24px] md:text-[20px]">Опишите в подробностях</h4>
        <div class="max-w-[60%] md:max-w-full">
          <div class="form-grid flex flex-col gap-[30px]">
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="name">Укажите название*</label>
              <div class="relative w-full flex items-center form-input">
                <input
                  pInputText
                  [ngClass]="{
                    'ng-invalid ng-dirty': ruleForm.controls.title.touched && ruleForm.controls.title.errors && ruleForm.controls.title.errors['required'],
                  }"
                  type="text"
                  id="name"
                  placeholder="Hазвание"
                  formControlName="title"
                />
              </div>
              <div *ngIf="ruleForm.controls.title.invalid && (ruleForm.controls.title.dirty || ruleForm.controls.title.touched)">
                <app-invaid-text [text]="'This field is required.'" *ngIf="ruleForm.controls.title.errors && ruleForm.controls.title.errors['required']"></app-invaid-text>
                <app-invaid-text [text]="'Title must be at least 6 characters long.'" *ngIf="ruleForm.controls.title.errors && ruleForm.controls.title.errors['minlength']"></app-invaid-text>
              </div>
            </div>
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="address">Местоположение*</label>
              <div class="relative w-full flex items-center form-input">
                <input
                  pInputText
                  [ngClass]="{
                    'ng-invalid ng-dirty': ruleForm.controls.address.touched && ruleForm.controls.address.errors && ruleForm.controls.address.errors['required'],
                  }"
                  type="text"
                  id="address"
                  placeholder="Местоположение"
                  formControlName="address"
                />
              </div>
              <div *ngIf="ruleForm.controls.address.invalid && (ruleForm.controls.address.dirty || ruleForm.controls.address.touched)">
                <app-invaid-text [text]="'This field is required.'" *ngIf="ruleForm.controls.address.errors && ruleForm.controls.address.errors['required']"></app-invaid-text>
                <app-invaid-text [text]="'Address must be at least 10 characters long.'" *ngIf="ruleForm.controls.address.errors && ruleForm.controls.address.errors['minlength']"></app-invaid-text>
              </div>
            </div>
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="desc">Описание*</label>
              <div class="relative w-full flex items-center form-input">
                <textarea
                  rows="5"
                  cols="30"
                  pInputTextarea
                  [ngClass]="{
                    'ng-invalid ng-dirty': ruleForm.controls.description.touched && ruleForm.controls.description.errors && ruleForm.controls.description.errors['required'],
                  }"
                  type="text"
                  id="desc"
                  placeholder="Подумайте, какие подробности вы хотели бы узнать из объявления. И добавьте их в описание"
                  formControlName="description"
                ></textarea>
              </div>
              <div *ngIf="ruleForm.controls.description.invalid && (ruleForm.controls.description.dirty || ruleForm.controls.description.touched)">
                <app-invaid-text [text]="'This field is required.'" *ngIf="ruleForm.controls.description.errors && ruleForm.controls.description.errors['required']"></app-invaid-text>
                <app-invaid-text [text]="'Description must be at least 10 characters long.'" *ngIf="ruleForm.controls.description.errors && ruleForm.controls.description.errors['minlength']"></app-invaid-text>
              </div>
            </div>
            <div class="clearfix" [pTooltip]="tooltipContent">
              <h4 class="text-black font-semibold mb-0 text-[24px] md:text-[20px]">Фото</h4>
              <p class="mb-3 mt-3">Первое фото будет на обложке объявления. Перетащите, чтобы изменить порядок.</p>
              <div class="card flex justify-content-center">
                <p-toast></p-toast>
                <p-fileUpload styleClass="file-upload" mode="basic" name="image" url="https://new.rent-home.uz/api/images/" (onUpload)="onUpload($event)" [auto]="true" method="post" [multiple]="true" accept="image/*" [maxFileSize]="1000000" chooseLabel="Upload" [headers]="headers"></p-fileUpload>
                <div class="flex flex-wrap gap-3 ml-3">
                  <div class="w-[104px] h-[104px] flex items-center justify-center overflow-hidden border border-dashed border-[var(--gray-4)] bg-[var(--gray-3)] rounded-[3px]" *ngFor="let obj of uploadedFiles">
                    <p-image class="flex items-center justify-center w-full h-full object-contain" [src]="obj?.image" alt="Image" [preview]="true">
                      <ng-template pTemplate="indicator">
                        <i class="pi pi-eye"></i>
                      </ng-template>
                    </p-image>
                  </div>
                </div>
              </div>
            </div>
            <ng-template #tooltipContent>
              <div class="flex align-items-center">
                <span>Добавьте в объявление настоящие фото товара, а не фото из интернета, чтобы повысить доверие покупателей. Поддерживаются файлы до 5МБ в формате .jpg .jpeg, .webp, .png, .gif/.</span>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
      <div class="forma max-w-[992px] md:max-w-full mt-4 mx-auto bg-[var(--gray-1)] md:bg-transparent px-8 py-8 px-8 py-8 md:px-0 md:py-0">
        <h4 class="text-black font-semibold mb-4 text-[24px] md:text-[20px]">Дополнительная информация</h4>
        <div class="max-w-[60%] md:max-w-full">
          <div class="flex flex-col gap-3 mb-4">
            <div class="flex gap-1">
              <p-checkbox formControlName="conditioner" [binary]="true" inputId="conditioner"></p-checkbox>
              <label class="cursor-pointer font-400 text-[--gray-6] text-base" for="conditioner">Кондиционер</label>
            </div>
            <div class="flex gap-1">
              <p-checkbox formControlName="washing_machine" [binary]="true" inputId="washing_machine"></p-checkbox>
              <label class="cursor-pointer font-400 text-[--gray-6] text-base" for="washing_machine">Стиральная машина</label>
            </div>
            <div class="flex gap-1">
              <p-checkbox formControlName="partnership" [binary]="true" inputId="partnership"></p-checkbox>
              <label class="cursor-pointer font-400 text-[--gray-6] text-base" for="partnership">К партнерству</label>
            </div>
          </div>
          <div class="flex flex-col gap-[30px]">
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="integeronly">Цена</label>
              <div class="relative w-full flex items-center form-input">
                <p-inputNumber inputId="integeronly" class="w-full" [maxlength]="9" formControlName="total_price"></p-inputNumber>
              </div>
            </div>

            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="price_for_one">Цена (На человека)</label>
              <div class="relative w-full flex items-center form-input">
                <p-inputNumber inputId="price_for_one" class="w-full" [maxlength]="9" formControlName="price_for_one"></p-inputNumber>
              </div>
            </div>
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="need_people_count">Число людей</label>
              <div class="relative w-full flex items-center form-input">
                <p-inputNumber inputId="need_people_count" class="w-full" [maxlength]="2" placeholder="99" formControlName="need_people_count"></p-inputNumber>
              </div>
            </div>
            <div class="flex flex-col gap-2 relative">
              <label class="font-400 text-[--gray-6] text-base" for="room_count">Количество комнат</label>
              <div class="relative w-full flex items-center form-input">
                <p-inputNumber inputId="room_count" class="w-full" [maxlength]="2" placeholder="99" formControlName="room_count"></p-inputNumber>
              </div>
            </div>

            <!--              &lt;!&ndash; <div class="flex flex-col gap-4">-->
            <!--                <p v-if="loadingBus" class="text-base font-400 text-[&#45;&#45;dark-5]">-->
            <!--                  Поиск маршрутов рядом с адресом-->
            <!--                </p>-->
            <!--                <p v-else class="text-base font-400 text-[&#45;&#45;dark-5]">-->
            <!--                  Маршруты рядом с адресом-->
            <!--                </p>-->
            <!--                <div class="flex gap-4" v-if="loadingBus">-->
            <!--                  <el-skeleton-->
            <!--                    v-for="loadCard in loadList"-->
            <!--                    :key="loadCard"-->
            <!--                    :rows="0"-->
            <!--                    width="100%"-->
            <!--                  />-->
            <!--                </div>-->
            <!--                <div v-else class="bus-routes">-->
            <!--                  <ul class="flex gap-4 flex-wrap">-->
            <!--                    <li-->
            <!--                      class="w-8 h-8 flex justify-center items-center bg-[&#45;&#45;green] text-white cursor-pointer rounded-sm"-->
            <!--                      v-for="route in routes"-->
            <!--                      @click="handleBusRoute(route)"-->
            <!--                    >-->
            <!--                      {{ route }}-->
            <!--                    </li>-->
            <!--                  </ul>-->
            <!--                </div>-->
            <!--              </div> &ndash;&gt;-->
            <!--            </div>-->
          </div>
          <div class="flex justify-end max-w-[60%] md:max-w-full mt-4 cursor-pointer">
            <div (click)="openMapDialog()" class="h-12 w-[250px] md:w-full flex items-center justify-center bg-[#3A75CE] rounded-lg text-white font-500 gap-2">
              Haritadan joyni ko’rsatish
              <svg width="16" height="19" viewBox="0 0 16 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M4 7C4 4.92893 5.67893 3.25 7.75 3.25C9.8211 3.25 11.5 4.92893 11.5 7C11.5 9.0711 9.8211 10.75 7.75 10.75C5.67893 10.75 4 9.0711 4 7ZM7.75 4.75C6.5074 4.75 5.5 5.75736 5.5 7C5.5 8.2426 6.5074 9.25 7.75 9.25C8.9926 9.25 10 8.2426 10 7C10 5.75736 8.9926 4.75 7.75 4.75Z" fill="white" />
                <path fill-rule="evenodd" clip-rule="evenodd" d="M1.20691 6.12724C1.48067 2.80603 4.25605 0.25 7.5885 0.25H7.9125C11.245 0.25 14.0203 2.80603 14.2941 6.12724C14.4408 7.90751 13.8909 9.6753 12.7602 11.0581L9.1654 15.4545C8.4341 16.3488 7.0669 16.3488 6.3356 15.4545L2.74082 11.0581C1.61008 9.6752 1.06017 7.90751 1.20691 6.12724ZM7.5885 1.75C5.03671 1.75 2.91147 3.70726 2.70184 6.25046C2.58702 7.64343 3.0173 9.0266 3.90204 10.1086L7.4968 14.505C7.6279 14.6653 7.8731 14.6653 8.0042 14.505L11.599 10.1086C12.4837 9.0266 12.914 7.64343 12.7992 6.25046C12.5895 3.70726 10.4643 1.75 7.9125 1.75H7.5885Z" fill="white" />
                <path d="M3.42082 14.3353C3.60606 13.9648 3.45589 13.5143 3.08541 13.3291C2.71493 13.1438 2.26442 13.294 2.07918 13.6645L0.0791814 17.6645C-0.0370686 17.897 -0.0246384 18.1731 0.112012 18.3942C0.248672 18.6153 0.490072 18.7499 0.750002 18.7499H14.75C15.0099 18.7499 15.2513 18.6153 15.388 18.3942C15.5246 18.1731 15.5371 17.897 15.4208 17.6645L13.4208 13.6645C13.2356 13.294 12.7851 13.1438 12.4146 13.3291C12.0441 13.5143 11.8939 13.9648 12.0792 14.3353L13.5365 17.2499H1.96353L3.42082 14.3353Z" fill="white" />
              </svg>
            </div>
          </div>
        </div>

        <div class="flex justify-end md:block mt-[65px] md:mt-6 max-w-[60%] md:max-w-full">
          <p-button pRipple pButton [loading]="_formControl.loading" (click)="onSubmit()" class="px-0 py-0 bg-[transparent] rounded-[12px] border-0 md:w-full" styleClass="w-[270px] md:w-full px-0 py-0 p-ripple h-12 rounded-[12px] bg-[var(--green)] text-white flex items-center justify-center">Saqlash</p-button>
        </div>
      </div>
    </div>
  </div>
  <app-map-dialog [formHandle]="formHandle"></app-map-dialog>
</div>
