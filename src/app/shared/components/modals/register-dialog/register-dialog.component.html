<p-dialog
  [(visible)]="visible"
  [dismissableMask]="true"
  [modal]="true"
  [breakpoints]="{ '575px': '95vw' }"
  [style]="{
    width: '456px',
    borderRadius: '12px',
    overflow: 'hidden',
    padding: 0,
  }"
  [showHeader]="false"
>
  <div class="flex flex-col gap-[24px]">
    <div class="flex justify-center">
      <h2 class="font-700 text-[31px] leading-[38px]">Shaxsiy ma’lumotlarni kiriting!</h2>
    </div>
    <div>
      <div [formGroup]="ruleForm" class="flex flex-col gap-[18px]">
        <div class="flex flex-col gap-2 relative">
          <label class="font-400 text-[--gray-6] text-base" for="name">Ism</label>
          <div class="relative w-full flex items-center password-input">
            <input
              pInputText
              [ngClass]="{
                'ng-invalid ng-dirty': ruleForm.controls.name.touched && ruleForm.controls.name.errors && ruleForm.controls.name.errors['required'],
              }"
              type="text"
              class="w-full h-12 rounded-[8px] border-[2px] border-solid border-[--input-stroke] bg-[--gray-1]"
              id="name"
              placeholder="Ism..."
              formControlName="name"
            />
          </div>

          <div *ngIf="ruleForm.controls.name.invalid && (ruleForm.controls.name.dirty || ruleForm.controls.name.touched)">
            <app-invaid-text [text]="'Name is required.'" *ngIf="ruleForm.controls.name.errors && ruleForm.controls.name.errors['required']"></app-invaid-text>
            <app-invaid-text [text]="'Password must be at least 4 characters long.'" *ngIf="ruleForm.controls.name.errors && ruleForm.controls.name.errors['minlength']"></app-invaid-text>
          </div>
        </div>
        <!-- <div class="flex flex-col gap-2 relative">
          <label class="font-400 text-[--gray-6] text-base" for="number">Telefon raqamingiz</label>
          <div class="relative w-full flex items-center">
            <p-inputMask
              mask="99 999 99 99"
              [ngClass]="{'ng-invalid ng-dirty': ruleForm.controls.phone_number.touched &&ruleForm.controls.phone_number.errors && ruleForm.controls.phone_number.errors['required'] }"
              type="text"
              class="mask-input  w-full"
              pInputText
              id="number"
              formControlName="phone_number"
              pattern="^\d{2} \d{3} \d{2} \d{2}$"
              [autoClear]="false"
            ></p-inputMask>
            <span class="number-style h-full absolute left-[18px] flex items-center">+998</span>
          </div>

          <div
            *ngIf="ruleForm.controls.phone_number.invalid && (ruleForm.controls.phone_number.dirty  || ruleForm.controls.phone_number.touched)"
          >
            <app-invaid-text [text]="'Phone number is required.'"  *ngIf="ruleForm.controls.phone_number.errors && ruleForm.controls.phone_number.errors['required']"></app-invaid-text>
            <app-invaid-text [text]="'Please enter in the format ##-###-##-##.'"  *ngIf="ruleForm.controls.phone_number.errors && ruleForm.controls.phone_number.errors['pattern']"></app-invaid-text>
          </div>

        </div> -->
        <div class="flex flex-col gap-2 text-base relative w-full">
          <label class="font-400 text-[gray-6]" for="password">Parol</label>
          <p-password formControlName="password" id="password" class="password-input w-full h-12 rounded-[8px] border-[2px] border-solid border-[--input-stroke] bg-[--gray-1]" [toggleMask]="true"></p-password>
          <!--          <p-inputNumber mode="decimal"-->
          <!--                         [maxlength]="6"-->
          <!--                         [useGrouping]="false"-->
          <!--                         placeholder="******"-->
          <!--                         class="password-input w-full h-12 rounded-[8px] border-[2px] border-solid border-[&#45;&#45;input-stroke] bg-[&#45;&#45;gray-1]"-->
          <!--                         pInputText id="password"-->
          <!--                         formControlName="password"-->
          <!--          ></p-inputNumber>-->
          <div *ngIf="ruleForm.controls.password.errors && ruleForm.controls.password.invalid && ruleForm.controls.password.touched">
            <app-invaid-text [text]="'Password is required.'" *ngIf="ruleForm.controls.password.errors['required']"></app-invaid-text>
            <app-invaid-text [text]="'Password must be at least 8 characters long.'" *ngIf="!ruleForm.controls.password.errors['pattern'] && ruleForm.controls.password.errors['minlength']"></app-invaid-text>
            <app-invaid-text [text]="'Password must contain at least one letter and one number.'" *ngIf="ruleForm.controls.password.errors['pattern']"></app-invaid-text>
          </div>
        </div>
        <div class="relative flex justify-center">
          <app-invaid-text class="w-full flex justify-center" [text]="'Проверьте правильность введенных данных'" *ngIf="infoError"></app-invaid-text>
        </div>
      </div>
      <button pButton [loading]="loading" (click)="onSubmit()" class="w-full mt-[18px] h-12 items-center text-[17px] bg-[color:var(--green)] rounded-[8px] text-white font-600 flex justify-center">Tasdiqlash</button>
    </div>
  </div>
</p-dialog>
